# Job Index 页面三级地区检索功能

## 功能概述

Job Index 页面现已支持三级地区检索功能，用户可以通过省份、城市、县区的联动选择来精确筛选招聘信息。

## 主要特性

### 1. 三级联动选择器
- **省份选择**：显示所有省份（包括直辖市）
- **城市选择**：根据选择的省份动态加载对应城市
- **县区选择**：根据选择的城市动态加载对应县区

### 2. 智能过滤逻辑
- **按省份过滤**：显示该省份及其下属所有城市、县区的职位
- **按城市过滤**：显示该城市及其下属所有县区的职位
- **按县区过滤**：只显示该县区的职位

### 3. 组合过滤
- 支持与职位类别、标签等其他过滤条件组合使用
- 保持过滤状态的持久化（URL参数）

## 使用方法

### 前端界面
1. 在招聘信息页面，找到"筛选"区域
2. 选择省份，城市和县区选择器会自动更新
3. 选择城市，县区选择器会自动更新
4. 选择县区进行精确筛选
5. 点击"应用筛选"按钮

### URL参数
- `province=省份ID`：按省份过滤
- `city=城市ID`：按城市过滤
- `county=县区ID`：按县区过滤
- 可以与其他参数组合：`?province=11&category=government`

## 技术实现

### 后端实现
- **模型**：Region模型支持三级层级结构
- **视图**：JobIndexPage.get_context()方法实现过滤逻辑
- **API**：提供RESTful API支持前端联动

### 前端实现
- **JavaScript**：region_selector.js实现联动逻辑
- **模板**：job_index_page.html集成三级选择器
- **样式**：响应式设计，支持移动端

## API接口

### 获取省份列表
```
GET /api/regions/provinces/
```

### 获取城市列表
```
GET /api/regions/cities/?province_id=省份ID
```

### 获取县区列表
```
GET /api/regions/counties/?city_id=城市ID
```

## 示例

### 筛选北京市的职位
```
/jobs/?province=11
```

### 筛选广州市的职位
```
/jobs/?city=4401
```

### 筛选朝阳区的职位
```
/jobs/?county=100
```

### 组合筛选：北京市的政府机关职位
```
/jobs/?province=11&category=government
```

## 特殊处理

### 直辖市处理
- 北京、上海、天津、重庆等直辖市直接下辖县区
- 选择直辖市时，城市选择器为空，直接显示县区

### 数据完整性
- 职位可以设置到任意层级（省/市/县）
- 支持职位地区信息的批量更新
- 提供地区信息的完整显示

## 扩展功能

### 未来可能的改进
1. **搜索建议**：输入地区名称时提供自动完成
2. **地图集成**：在地图上选择地区
3. **热门地区**：显示最受欢迎的招聘地区
4. **地区统计**：显示各地区的职位数量统计

## 维护说明

### 添加新地区
1. 使用管理命令：`python manage.py init_regions`
2. 或通过Django管理界面手动添加

### 更新职位地区
1. 通过Django管理界面编辑职位
2. 或使用脚本批量更新

### 性能优化
- 地区数据已建立索引
- API响应使用缓存
- 前端使用异步加载 